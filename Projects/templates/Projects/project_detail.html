{% extends 'Users/baseClient.html' %} {% load static %} {% block content %}
<head>
  <!-- django-quill-editor Media -->
  {% include 'django_quill/media.html' %}
</head>

<!-- Page Header -->
<div>
  <h3 class="text-24 fw-bold text-dark-300 mb-2">{{ project.title }}</h3>
  <ul class="d-flex align-items-center gap-2">
    <li class="text-dark-200 fs-6">Dashboard</li>
    <li>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="5"
        height="11"
        viewBox="0 0 5 11"
        fill="none"
      >
        <path
          d="M1 10L4 5.5L1 1"
          stroke="#5B5B5B"
          stroke-width="1.2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </li>
    <li class="text-lime-300 fs-6">{{ project.title }}</li>
  </ul>
</div>

<!-- Project Info -->
<div class="row justify-content-center">
  <div class="col-xl-8">
    <div class="d-flex flex-column gap-4">
      <!-- Project Info -->
      <div class="gig-info-card">
        <div class="gig-info-header">
          <h4 class="text-18 fw-semibold text-dark-300">Project Info</h4>
        </div>
        <div class="gig-info-body bg-white">
          <div class="row g-4">
            <!-- Título del proyecto -->
            <div class="col-12">
              <div class="form-container">
                <label class="form-label">Project Title</label>
                <div class="form-control shadow-none readonly-field">
                  {{ project.title }}
                </div>
              </div>
            </div>
            <!-- Fecha de inicio -->
            <div class="col-md-6">
              <div class="form-container">
                <label class="form-label">Start Date</label>
                <div class="form-control shadow-none readonly-field">
                  {{ project.start_date }}
                </div>
              </div>
            </div>
            <!-- Fecha de vencimiento -->
            <div class="col-md-6">
              <div class="form-container">
                <label class="form-label">Due Date</label>
                <div class="form-control shadow-none readonly-field">
                  {{ project.due_date }}
                </div>
              </div>
            </div>
            <!-- Presupuesto -->
            <div class="col-md-6">
              <div class="form-container">
                <label class="form-label">Budget</label>
                <div class="form-control shadow-none readonly-field">
                  ${{ project.budget }}
                </div>
              </div>
            </div>
            <!-- Categoría -->
            <div class="col-md-6">
              <div class="form-container">
                <label class="form-label">Category</label>
                <div class="form-control shadow-none readonly-field">
                  {{ project.get_category_display }}
                </div>
              </div>
            </div>
            <!-- Descripción  -->
            <div class="col-12">
              <div class="form-container">
                <label class="text-18 fw-semibold text-dark-300"
                  >Description</label
                >
                <div>{{ project.description.html|safe }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Sección de Hitos -->
<div class="milestones-section container">
    <h2 class="text-20 fw-semibold text-dark-300 mb-3">Project Milestones</h2>
    <!-- Botón para añadir un nuevo hito -->
    <div class="text mt-4">
      <div class="button-group">
        <button type="submit" class="w-btn-plus-lg">Add milestones</button>
        <a href="{% url 'home_client' %}" class="w-btn-danger-lg"> Back </a>
      </div>
      <p>.</p>
      <p></p>
    </div>
  
    <div class="row justify-content-center" style="gap: 20px;">
      {% for milestone in project.milestones.all %}
      <div 
        class="col-md-4" 
        style="max-width: 300px; flex-grow: 1;" 
        onclick="window.location.href='{% url 'milestone_detail' milestone.id %}'"
        style="cursor: pointer"
        class="text-dark-200"
      >
        <div class="card h-100">
          <div class="position-relative">
            <img src="{% static 'img/category/hitos/' %}{{ milestone.category }}.png" class="recently-view-card-img w-100" alt="{{ milestone.title }}" style="height: 200px; object-fit: cover;">
          </div>
          <div class="card-body d-flex flex-column">
            <h4 class="card-title">{{ milestone.title }}</h4>
            <h6 class="card-subtitle mb-2 text-muted">Due: {{ milestone.due_date }}</h6>
            <h5 class="card-text"><small class="text-muted">{{ milestone.get_category_display }}</small></h5>
            <p class="card-text"><small class="text-muted">{{ milestone.project.client.user.first_name }}</small></p>
            <div class="mt-auto">
              {% if milestone.file %}
              <a href="{{ milestone.file.url }}" class="btn btn-outline-info btn-sm">Download File</a>
              {% endif %}
              <a href="{% url 'edit_milestone' milestone.id %}" class="btn btn-outline-primary btn-sm">Edit</a>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <p class="text-center w-100">There are no defined milestones for this project.</p>
      {% endfor %}
    </div>
  </div>
  

<style>
  .readonly-field {
    border: 2px solid #ccc;
    border-radius: 10px;
    padding: 10px;
    background-color: #f5f5f5;
    color: #333;
    cursor: not-allowed;
    min-height: 40px;
    display: flex;
    align-items: center;
  }

  .ql-container {
    border: 2px solid #ccc; /* Borde personalizado */
    border-radius: 10px; /* Bordes redondeados */
    min-height: 300px; /* Ajustar altura del área de texto */
    padding: 10px; /* Espacio dentro del editor */
  }

  .ql-editor {
    min-height: 280px; /* Ajustar la altura del área de escritura */
    font-size: 16px; /* Tamaño de fuente dentro del editor */
    border: 2px solid #ccc; /* Borde personalizado */
    border-radius: 10px; /* Bordes redondeados */
  }
</style>

{% endblock %}
