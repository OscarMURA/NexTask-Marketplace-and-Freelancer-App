{% extends 'Users/base.html' %}
{% block content %}
<div class="container">
    <section class="py-110 bg-offWhite">
        <div class="container">
            <div class="bg-white rounded-3 p-3">
                <h2 class="section-title mb-4">Work Experience</h2>
                <form method="post">
                    {% csrf_token %}
                    {{ work_experience_formset.management_form }}
                    <div id="work-experience-forms">
                        {% for form in work_experience_formset %}
                            <div class="form-container">
                                <div class="row gy-3">
                                    {{ form.as_p }}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <button type="button" id="add-work-experience" class="btn btn-success mt-2">Add More</button>
                    <button type="submit" class="btn btn-primary mt-2">Submit</button>
                </form>
            </div>
        </div>
    </section>
</div>

<script>
    document.getElementById('add-work-experience').addEventListener('click', function() {
        let totalForms = document.getElementById('id_work_experience_formset-TOTAL_FORMS');
        let formContainer = document.getElementById('work-experience-forms');
        let newForm = formContainer.children[0].cloneNode(true);
        formContainer.appendChild(newForm);
        totalForms.value = parseInt(totalForms.value) + 1;
    });
</script>
{% endblock %}
