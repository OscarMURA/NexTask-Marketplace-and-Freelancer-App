{% extends 'Users/baseClient.html' %}
{% load i18n %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-24 fw-bold text-dark-300 mb-4">{% trans "Client Report" %}</h2>
    
    <!-- Formulario de Filtro -->
    <form method="get" class="mb-4">
        <div class="row">
            {{ form.as_p }}
        </div>
        <button type="submit" class="btn btn-primary mt-3">{% trans "Filter Report" %}</button>
    </form>

    <!-- Resumen de Proyectos -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card p-4 bg-light">
                <h5 class="text-dark-300 mb-2">{% trans "Total Projects" %}</h5>
                <p class="text-20 fw-semibold">{{ total_projects }}</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-4 bg-light">
                <h5 class="text-dark-300 mb-2">{% trans "Projects in Progress" %}</h5>
                <p class="text-20 fw-semibold">{{ projects_in_progress }}</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card p-4 bg-light">
                <h5 class="text-dark-300 mb-2">{% trans "Completed Projects" %}</h5>
                <p class="text-20 fw-semibold">{{ completed_projects }}</p>
            </div>
        </div>
    </div>

    <!-- MÃ©tricas -->
    <div class="metrics-section mb-4">
        {% if progress %}
            <div class="alert alert-info">
                <strong>{% trans "Average Progress:" %}</strong> {{ progress }}%
            </div>
        {% endif %}
        {% if milestones %}
            <div class="alert alert-info">
                <strong>{% trans "Total Milestones across Projects:" %}</strong> {{ milestones }}
            </div>
        {% endif %}
    </div>

    <!-- Listado de Proyectos y Tareas Completadas -->
    <h4 class="fw-semibold text-dark-300 mb-3">{% trans "Projects and Completed Tasks" %}</h4>
    <ul class="list-group">
        {% for project, completed_tasks in tasks.items %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ project.title }}
                <span class="badge bg-primary rounded-pill">{{ completed_tasks }} {% trans "Completed Tasks" %}</span>
            </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
